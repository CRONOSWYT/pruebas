<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiTube - Tu Plataforma de Videos Personal</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .hero-banner {
            background: linear-gradient(135deg, rgba(0, 191, 255, 0.2) 0%, rgba(0, 0, 0, 0.5) 100%);
            padding: 60px 20px;
            margin-bottom: 50px;
            border-bottom: 1px solid #303030;
        }

        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-content h1 {
            font-size: 48px;
            font-weight: 800;
            margin: 0 0 20px 0;
            color: #fff;
        }

        .hero-content p {
            font-size: 18px;
            color: #aaa;
            margin: 0 0 30px 0;
            line-height: 1.6;
            max-width: 600px;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-hero {
            background: #00bfff;
            color: #000;
            border: none;
            padding: 14px 35px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-hero:hover {
            background: #00a8d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 191, 255, 0.3);
        }

        .btn-secondary-hero {
            background: #212121;
            color: #fff;
            border: 1px solid #303030;
        }

        .btn-secondary-hero:hover {
            background: #313131;
            border-color: #404040;
        }

        .section {
            max-width: 1400px;
            margin: 0 auto 50px;
            padding: 0 20px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #303030;
        }

        .section-header h2 {
            font-size: 28px;
            font-weight: 700;
            margin: 0;
            flex: 1;
        }

        .section-header-icon {
            font-size: 32px;
        }

        .section-action {
            background: #212121;
            border: 1px solid #303030;
            color: #fff;
            padding: 10px 18px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .section-action:hover {
            background: #313131;
            border-color: #404040;
        }

        .videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }

        .playlists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .video-card-home {
            background: #212121;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #303030;
            display: flex;
            flex-direction: column;
        }

        .video-card-home:hover {
            background: #313131;
            border-color: #00bfff;
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0, 191, 255, 0.2);
        }

        .video-card-thumbnail {
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            background: #000;
            overflow: hidden;
        }

        .video-card-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .video-card-home:hover .video-card-thumbnail img {
            transform: scale(1.05);
        }

        .video-play-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .video-card-home:hover .video-play-overlay {
            opacity: 1;
        }

        .video-duration {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .video-card-info {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .video-title {
            font-size: 14px;
            font-weight: 600;
            line-height: 1.4;
            color: #fff;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-meta {
            font-size: 12px;
            color: #aaa;
        }

        .playlist-card-home {
            background: #212121;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #303030;
            display: flex;
            flex-direction: column;
        }

        .playlist-card-home:hover {
            background: #313131;
            border-color: #00bfff;
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0, 191, 255, 0.2);
        }

        .playlist-thumbnail {
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            background: #000;
            overflow: hidden;
        }

        .playlist-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .playlist-card-home:hover .playlist-thumbnail img {
            transform: scale(1.05);
        }

        .playlist-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .playlist-card-home:hover .playlist-overlay {
            opacity: 1;
        }

        .playlist-badge {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: #00bfff;
            color: #000;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 2;
        }

        .playlist-card-info {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .playlist-title {
            font-size: 15px;
            font-weight: 600;
            color: #fff;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .playlist-desc {
            font-size: 12px;
            color: #aaa;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .empty-message {
            text-align: center;
            padding: 40px 20px;
            color: #aaa;
        }

        .empty-message h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #fff;
        }

        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 32px;
            }

            .hero-content p {
                font-size: 16px;
            }

            .hero-buttons {
                flex-direction: column;
            }

            .btn-hero {
                width: 100%;
                justify-content: center;
            }

            .videos-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .playlists-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="logo">üé¨ MiTube</a>
    <input type="text" id="search" placeholder="Buscar videos...">
    <a href="videos.html" style="text-decoration: none; color: #fff; padding: 8px 16px; background: #212121; border-radius: 20px; font-size: 14px; margin-right: 10px;">üé• Videos</a>
    <a href="playlists.html" style="text-decoration: none; color: #fff; padding: 8px 16px; background: #212121; border-radius: 20px; font-size: 14px;">üìã Playlists</a>
</header>

<div class="hero-banner">
    <div class="hero-content">
        <h1>Bienvenido a MiTube</h1>
        <p>Tu plataforma personal de videos. Organiza, busca y reproduc tus videos favoritos desde cualquier dispositivo.</p>
        <div class="hero-buttons">
            <a href="videos.html" class="btn-hero">‚ñ∂ Ver Todos los Videos</a>
            <a href="playlists.html" class="btn-hero btn-secondary-hero">üìã Explorar Playlists</a>
        </div>
    </div>
</div>

<div class="section" id="history-section" style="display: none;">
    <div class="section-header">
        <span class="section-header-icon">‚è±Ô∏è</span>
        <h2>Continuado Viendo</h2>
    </div>
    <div id="watch-history" class="videos-container"></div>
</div>

<div class="section">
    <div class="section-header">
        <span class="section-header-icon">üìã</span>
        <h2>Mis Playlists</h2>
        <a href="playlists.html" class="section-action">Ver todas ‚Üí</a>
    </div>
    <div id="playlists-container" class="playlists-grid"></div>
</div>

<div class="section">
    <div class="section-header">
        <span class="section-header-icon">üé•</span>
        <h2>Videos Recientes</h2>
        <a href="videos.html" class="section-action">Ver todos ‚Üí</a>
    </div>
    <div id="video-list" class="videos-container"></div>
</div>

<script src="videos.js"></script>
<script src="script.js"></script>
<script>
    // Renderizar playlists
    function renderPlaylistsHome() {
        const container = document.getElementById("playlists-container");
        if (!container) return;
        
        container.innerHTML = "";

        if (playlists.length === 0) {
            container.innerHTML = "<div class='empty-message' style='grid-column: 1/-1;'><h3>Sin playlists a√∫n</h3><p>Las playlists aparecer√°n aqu√≠</p></div>";
            return;
        }

        playlists.slice(0, 6).forEach(playlist => {
            const playlistVideos = videos.filter(v => playlist.videos.includes(v.id));
            const thumbnail = playlistVideos[0]?.thumbnail || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23313131' width='100' height='100'/%3E%3C/svg%3E";
            
            const card = document.createElement("div");
            card.className = "playlist-card-home";
            card.onclick = () => window.location.href = `playlist.html?id=${playlist.id}`;
            card.innerHTML = `
                <div class="playlist-thumbnail">
                    <img src="${thumbnail}" alt="${playlist.title}">
                    <div class="playlist-overlay">‚ñ∂</div>
                    <div class="playlist-badge">${playlistVideos.length}</div>
                </div>
                <div class="playlist-card-info">
                    <div class="playlist-title">${playlist.title}</div>
                    <div class="playlist-desc">${playlist.description || 'Sin descripci√≥n'}</div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // Renderizar videos recientes
    function renderRecentVideos() {
        const container = document.getElementById("video-list");
        const recentVideos = videos.sort((a, b) => new Date(b.uploadDate) - new Date(a.uploadDate)).slice(0, 8);
        
        container.innerHTML = "";
        
        if (recentVideos.length === 0) {
            container.innerHTML = "<div class='empty-message' style='grid-column: 1/-1;'><h3>Sin videos</h3><p>Los videos aparecer√°n aqu√≠</p></div>";
            return;
        }

        recentVideos.forEach(video => {
            const card = document.createElement("div");
            card.className = "video-card-home";
            card.onclick = () => openVideo(video.id);
            card.innerHTML = `
                <div class="video-card-thumbnail">
                    <img src="${video.thumbnail}" alt="${video.title}">
                    <div class="video-play-overlay">‚ñ∂</div>
                    <div class="video-duration">${video.duration}</div>
                </div>
                <div class="video-card-info">
                    <div class="video-title">${video.title}</div>
                    <div class="video-meta">${video.author} ‚Ä¢ ${formatUploadDate(video.uploadDate)}</div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function openVideo(id) {
        window.location.href = `video.html?id=${id}`;
    }

    // Inicializar
    renderPlaylistsHome();
    renderRecentVideos();

    // Historial
    const history = getWatchHistory();
    if (history && history.length > 0) {
        const historySection = document.getElementById("history-section");
        historySection.style.display = "block";
        const historyContainer = document.getElementById("watch-history");
        
        const historyVideos = history.slice(0, 6).map(id => videos.find(v => v.id === id)).filter(v => v);
        
        historyContainer.innerHTML = "";
        historyVideos.forEach(video => {
            if (!video) return;
            const card = document.createElement("div");
            card.className = "video-card-home";
            card.onclick = () => openVideo(video.id);
            card.innerHTML = `
                <div class="video-card-thumbnail">
                    <img src="${video.thumbnail}" alt="${video.title}">
                    <div class="video-play-overlay">‚ñ∂</div>
                    <div class="video-duration">${video.duration}</div>
                </div>
                <div class="video-card-info">
                    <div class="video-title">${video.title}</div>
                    <div class="video-meta">${video.author} ‚Ä¢ ${formatUploadDate(video.uploadDate)}</div>
                </div>
            `;
            historyContainer.appendChild(card);
        });
    }
</script>

</body>
</html>
